--!strict
--!nolint LocalUnused
--!nolint ImportUnused
--# selene: allow(empty_if, if_same_then_else, manual_table_clone, unused_variable)
-- This file was @autogenerated by protoc-gen-luau
local proto = require(script.Parent.Parent.Parent.Parent.Parent.proto)
local typeRegistry = require(script.Parent.Parent.Parent.Parent.Parent.proto.typeRegistry)

type _Messages = {
	ComponentShared: _ComponentSharedMessage,
	ComponentShared_AnalyticsDataEntry: _ComponentShared_AnalyticsDataEntryMessage,
}
local messages: _Messages = {} :: _Messages

local _roblox_apppageplatform_shared_v1beta1_hydration_data_spec = require(script.Parent.hydration_data_spec)
local _roblox_apppageplatform_shared_v1beta1_ui_component_type = require(script.Parent.ui_component_type)
local _roblox_apppageplatform_shared_v1beta1_analytics_data = require(script.Parent.analytics_data)

type _ComponentSharedImpl = {
	__index: _ComponentSharedImpl,
	new: (fields: _ComponentSharedPartialFields?) -> ComponentShared,
	encode: (self: ComponentShared) -> buffer,
	decode: (input: buffer) -> ComponentShared,
	jsonEncode: (self: ComponentShared) -> { [string]: any },
	jsonDecode: (input: { [string]: any }) -> ComponentShared,
	descriptor: proto.Descriptor,
}

type _ComponentSharedFields = {
	component_type: _roblox_apppageplatform_shared_v1beta1_ui_component_type.UiComponentType,
	data: { _roblox_apppageplatform_shared_v1beta1_hydration_data_spec.HydrationDataSpec },
	analytics_data: { [string]: _roblox_apppageplatform_shared_v1beta1_analytics_data.AnalyticsDataField },
}

type _ComponentSharedPartialFields = {
	component_type: _roblox_apppageplatform_shared_v1beta1_ui_component_type.UiComponentType?,
	data: { _roblox_apppageplatform_shared_v1beta1_hydration_data_spec.HydrationDataSpec }?,
	analytics_data: { [string]: _roblox_apppageplatform_shared_v1beta1_analytics_data.AnalyticsDataField }?,
}

export type ComponentShared = typeof(setmetatable({} :: _ComponentSharedFields, {} :: _ComponentSharedImpl))
type _ComponentSharedMessage = proto.Message<ComponentShared, _ComponentSharedPartialFields>

type _ComponentShared_AnalyticsDataEntryImpl = {
	__index: _ComponentShared_AnalyticsDataEntryImpl,
	new: (fields: _ComponentShared_AnalyticsDataEntryPartialFields?) -> ComponentShared_AnalyticsDataEntry,
	encode: (self: ComponentShared_AnalyticsDataEntry) -> buffer,
	decode: (input: buffer) -> ComponentShared_AnalyticsDataEntry,
	jsonEncode: (self: ComponentShared_AnalyticsDataEntry) -> { [string]: any },
	jsonDecode: (input: { [string]: any }) -> ComponentShared_AnalyticsDataEntry,
	descriptor: proto.Descriptor,
}

type _ComponentShared_AnalyticsDataEntryFields = {
	key: string,
	value: _roblox_apppageplatform_shared_v1beta1_analytics_data.AnalyticsDataField?,
}

type _ComponentShared_AnalyticsDataEntryPartialFields = {
	key: string?,
	value: _roblox_apppageplatform_shared_v1beta1_analytics_data.AnalyticsDataField?,
}

export type ComponentShared_AnalyticsDataEntry = typeof(setmetatable(
	{} :: _ComponentShared_AnalyticsDataEntryFields,
	{} :: _ComponentShared_AnalyticsDataEntryImpl
))
type _ComponentShared_AnalyticsDataEntryMessage = proto.Message<
	ComponentShared_AnalyticsDataEntry,
	_ComponentShared_AnalyticsDataEntryPartialFields
>

do
	local _ComponentSharedImpl = {}
	_ComponentSharedImpl.__index = _ComponentSharedImpl

	function _ComponentSharedImpl.new(data: _ComponentSharedPartialFields?): ComponentShared
		return setmetatable({
			component_type = if data == nil or data.component_type == nil
				then assert(
					_roblox_apppageplatform_shared_v1beta1_ui_component_type.UiComponentType.fromNumber(0),
					"Enum has no 0 default"
				)
				else data.component_type,
			data = if data == nil or data.data == nil then {} else data.data,
			analytics_data = if data == nil or data.analytics_data == nil then {} else data.analytics_data,
		}, _ComponentSharedImpl :: _ComponentSharedImpl)
	end

	function _ComponentSharedImpl.encode(self: ComponentShared): buffer
		local output = buffer.create(0)
		local cursor = 0

		if
			self.component_type ~= nil
			and (
				self.component_type ~= nil and self.component_type ~= 0
				or self.component_type
					~= _roblox_apppageplatform_shared_v1beta1_ui_component_type.UiComponentType.fromNumber(0)
			)
		then
			output, cursor = proto.writeTag(output, cursor, 1, proto.wireTypes.varint)
			output, cursor = proto.writeVarInt(
				output,
				cursor,
				_roblox_apppageplatform_shared_v1beta1_ui_component_type.UiComponentType.toNumber(
					self.component_type :: any
				)
			)
		end

		if self.data ~= nil and #self.data > 0 then
			for _, value in self.data do
				local encoded = value:encode()
				output, cursor = proto.writeTag(output, cursor, 2, proto.wireTypes.lengthDelimited)
				output, cursor = proto.writeBuffer(output, cursor, encoded, buffer.len(encoded))
			end
		end

		if self.analytics_data ~= nil and next(self.analytics_data) ~= nil then
			for key, value in self.analytics_data do
				local mapBuffer = buffer.create(0)
				local mapCursor = 0
				mapBuffer, mapCursor = proto.writeTag(mapBuffer, mapCursor, 1, proto.wireTypes.lengthDelimited)
				mapBuffer, mapCursor = proto.writeString(mapBuffer, mapCursor, key)
				local encoded = value:encode()
				mapBuffer, mapCursor = proto.writeTag(mapBuffer, mapCursor, 2, proto.wireTypes.lengthDelimited)
				mapBuffer, mapCursor = proto.writeBuffer(mapBuffer, mapCursor, encoded, buffer.len(encoded))
				output, cursor = proto.writeTag(output, cursor, 3, proto.wireTypes.lengthDelimited)
				output, cursor = proto.writeBuffer(output, cursor, mapBuffer, mapCursor)
			end
		end

		local shrunkBuffer = buffer.create(cursor)
		buffer.copy(shrunkBuffer, 0, output, 0, cursor)
		return shrunkBuffer
	end

	function _ComponentSharedImpl.decode(input: buffer): ComponentShared
		local self = _ComponentSharedImpl.new()
		local cursor = 0

		while cursor < buffer.len(input) do
			local field, wireType
			field, wireType, cursor = proto.readTag(input, cursor)

			if wireType == proto.wireTypes.varint then
				if field == 1 then
					local value
					value, cursor = proto.readVarIntI32(input, cursor)
					self.component_type = (
						_roblox_apppageplatform_shared_v1beta1_ui_component_type.UiComponentType.fromNumber(value)
						or value
					) :: any --[[ Luau: Enums are a string intersection which Luau is quick to dismantle ]]
					continue
				end

				local _
				_, cursor = proto.readVarInt(input, cursor)
			elseif wireType == proto.wireTypes.lengthDelimited then
				if field == 2 then
					local value
					value, cursor = proto.readBuffer(input, cursor)
					table.insert(
						self.data,
						_roblox_apppageplatform_shared_v1beta1_hydration_data_spec.HydrationDataSpec.decode(value)
					)
					continue
				elseif field == 3 then
					local value
					value, cursor = proto.readBuffer(input, cursor)

					local mapEntry = messages.ComponentShared_AnalyticsDataEntry.decode(value)

					local keyDefault = ""
					local valueDefault = _roblox_apppageplatform_shared_v1beta1_analytics_data.AnalyticsDataField.new()

					self.analytics_data[mapEntry.key or keyDefault] = mapEntry.value or valueDefault

					continue
				end

				local length
				length, cursor = proto.readVarInt(input, cursor)

				cursor += length
			elseif wireType == proto.wireTypes.i32 then
				-- No fields

				local _
				_, cursor = proto.readFixed32(input, cursor)
			elseif wireType == proto.wireTypes.i64 then
				-- No fields

				local _
				_, cursor = proto.readFixed64(input, cursor)
			else
				error("Unsupported wire type: " .. wireType)
			end
		end

		return self
	end

	function _ComponentSharedImpl.jsonEncode(self: ComponentShared): any
		local output = {}

		if
			self.component_type ~= nil
			and (
				self.component_type ~= nil and self.component_type ~= 0
				or self.component_type
					~= _roblox_apppageplatform_shared_v1beta1_ui_component_type.UiComponentType.fromNumber(0)
			)
		then
			output.componentType = if typeof(self.component_type) == "number"
				then self.component_type
				else _roblox_apppageplatform_shared_v1beta1_ui_component_type.UiComponentType.toNumber(
					self.component_type :: any
				)
		end

		if self.data ~= nil and #self.data > 0 then
			local newOutput = {}
			for _, value in self.data do
				table.insert(newOutput, value:jsonEncode())
			end
			output.data = newOutput
		end

		if self.analytics_data ~= nil and next(self.analytics_data) ~= nil then
			local newOutput = {}
			for key, value in self.analytics_data do
				newOutput[key] = value:jsonEncode()
			end
			output.analyticsData = newOutput
		end

		return output
	end

	function _ComponentSharedImpl.jsonDecode(input: { [string]: any }): ComponentShared
		local self = _ComponentSharedImpl.new()

		if input.component_type ~= nil then
			self.component_type = if typeof(input.component_type) == "number"
				then (_roblox_apppageplatform_shared_v1beta1_ui_component_type.UiComponentType.fromNumber(
					input.component_type
				) or input.component_type)
				else (_roblox_apppageplatform_shared_v1beta1_ui_component_type.UiComponentType.fromName(
					input.component_type
				) or input.component_type)
		end

		if input.componentType ~= nil then
			self.component_type = if typeof(input.componentType) == "number"
				then (_roblox_apppageplatform_shared_v1beta1_ui_component_type.UiComponentType.fromNumber(
					input.componentType
				) or input.componentType)
				else (_roblox_apppageplatform_shared_v1beta1_ui_component_type.UiComponentType.fromName(
					input.componentType
				) or input.componentType)
		end

		if input.data ~= nil then
			local newOutput: { _roblox_apppageplatform_shared_v1beta1_hydration_data_spec.HydrationDataSpec } = {}
			for _, value in input.data do
				table.insert(
					newOutput,
					_roblox_apppageplatform_shared_v1beta1_hydration_data_spec.HydrationDataSpec.jsonDecode(value)
				)
			end

			self.data = newOutput
		end

		if input.analytics_data ~= nil then
			local newOutput: { [string]: _roblox_apppageplatform_shared_v1beta1_analytics_data.AnalyticsDataField } = {}
			for key, value in input.analytics_data do
				newOutput[key] =
					_roblox_apppageplatform_shared_v1beta1_analytics_data.AnalyticsDataField.jsonDecode(value)
			end

			self.analytics_data = newOutput
		end

		if input.analyticsData ~= nil then
			local newOutput: { [string]: _roblox_apppageplatform_shared_v1beta1_analytics_data.AnalyticsDataField } = {}
			for key, value in input.analyticsData do
				newOutput[key] =
					_roblox_apppageplatform_shared_v1beta1_analytics_data.AnalyticsDataField.jsonDecode(value)
			end

			self.analytics_data = newOutput
		end

		return self
	end

	_ComponentSharedImpl.descriptor = {
		name = "ComponentShared",
		fullName = "roblox.apppageplatform.shared.v1beta1.ComponentShared",
	}

	messages.ComponentShared = _ComponentSharedImpl :: any -- Luau: Not sure why this intersection fails.

	typeRegistry.default:register(messages.ComponentShared)
end

do
	local _ComponentShared_AnalyticsDataEntryImpl = {}
	_ComponentShared_AnalyticsDataEntryImpl.__index = _ComponentShared_AnalyticsDataEntryImpl

	function _ComponentShared_AnalyticsDataEntryImpl.new(
		data: _ComponentShared_AnalyticsDataEntryPartialFields?
	): ComponentShared_AnalyticsDataEntry
		return setmetatable({
			key = if data == nil or data.key == nil then "" else data.key,
			value = if data == nil or data.value == nil then nil else data.value,
		}, _ComponentShared_AnalyticsDataEntryImpl :: _ComponentShared_AnalyticsDataEntryImpl)
	end

	function _ComponentShared_AnalyticsDataEntryImpl.encode(self: ComponentShared_AnalyticsDataEntry): buffer
		local output = buffer.create(0)
		local cursor = 0

		if self.key ~= nil and self.key ~= "" then
			output, cursor = proto.writeTag(output, cursor, 1, proto.wireTypes.lengthDelimited)
			output, cursor = proto.writeString(output, cursor, self.key)
		end

		if self.value ~= nil then
			local encoded = self.value:encode()
			output, cursor = proto.writeTag(output, cursor, 2, proto.wireTypes.lengthDelimited)
			output, cursor = proto.writeBuffer(output, cursor, encoded, buffer.len(encoded))
		end

		local shrunkBuffer = buffer.create(cursor)
		buffer.copy(shrunkBuffer, 0, output, 0, cursor)
		return shrunkBuffer
	end

	function _ComponentShared_AnalyticsDataEntryImpl.decode(input: buffer): ComponentShared_AnalyticsDataEntry
		local self = _ComponentShared_AnalyticsDataEntryImpl.new()
		local cursor = 0

		while cursor < buffer.len(input) do
			local field, wireType
			field, wireType, cursor = proto.readTag(input, cursor)

			if wireType == proto.wireTypes.varint then
				-- No fields

				local _
				_, cursor = proto.readVarInt(input, cursor)
			elseif wireType == proto.wireTypes.lengthDelimited then
				if field == 1 then
					local value
					value, cursor = proto.readBuffer(input, cursor)
					self.key = buffer.tostring(value)
					continue
				elseif field == 2 then
					local value
					value, cursor = proto.readBuffer(input, cursor)
					self.value = _roblox_apppageplatform_shared_v1beta1_analytics_data.AnalyticsDataField.decode(value)
					continue
				end

				local length
				length, cursor = proto.readVarInt(input, cursor)

				cursor += length
			elseif wireType == proto.wireTypes.i32 then
				-- No fields

				local _
				_, cursor = proto.readFixed32(input, cursor)
			elseif wireType == proto.wireTypes.i64 then
				-- No fields

				local _
				_, cursor = proto.readFixed64(input, cursor)
			else
				error("Unsupported wire type: " .. wireType)
			end
		end

		return self
	end

	function _ComponentShared_AnalyticsDataEntryImpl.jsonEncode(self: ComponentShared_AnalyticsDataEntry): any
		local output = {}

		if self.key ~= nil and self.key ~= "" then
			output.key = self.key
		end

		if self.value ~= nil then
			output.value = self.value:jsonEncode()
		end

		return output
	end

	function _ComponentShared_AnalyticsDataEntryImpl.jsonDecode(
		input: { [string]: any }
	): ComponentShared_AnalyticsDataEntry
		local self = _ComponentShared_AnalyticsDataEntryImpl.new()

		if input.key ~= nil then
			self.key = input.key
		end

		if input.value ~= nil then
			self.value =
				_roblox_apppageplatform_shared_v1beta1_analytics_data.AnalyticsDataField.jsonDecode(input.value)
		end

		return self
	end

	_ComponentShared_AnalyticsDataEntryImpl.descriptor = {
		name = "ComponentShared_AnalyticsDataEntry",
		fullName = "roblox.apppageplatform.shared.v1beta1.AnalyticsDataEntry",
	}

	messages.ComponentShared_AnalyticsDataEntry = _ComponentShared_AnalyticsDataEntryImpl :: any -- Luau: Not sure why this intersection fails.

	typeRegistry.default:register(messages.ComponentShared_AnalyticsDataEntry)
end

return {
	ComponentShared = messages.ComponentShared,
}
